import"./main-65bNNR6D.js";class m{constructor(){this.demoGames=this.getDemoGames()}async getTopGames(){try{const t=await fetch("https://steamspy.com/api.php?request=top100in2weeks");if(!t.ok)throw new Error("Steam Spy –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω");const s=await t.json();return!s||Object.keys(s).length===0?this.getDemoTopGames():Object.values(s).slice(0,12).map(e=>({name:e.name,players:e.average_2weeks?.toLocaleString()||"0",positive:e.positive||0,negative:e.negative||0,score:this.calculateScore(e.positive,e.negative),price:e.price?`${e.price/100}$`:"–ë–µ—Å–ø–ª–∞—Ç–Ω–æ",image:`https://cdn.cloudflare.steamstatic.com/steam/apps/${e.appid}/header.jpg`,appid:e.appid}))}catch(t){return console.error("Steam Spy API error:",t),this.getDemoTopGames()}}async searchGames(t){try{const s=await fetch("https://steamspy.com/api.php?request=all");if(!s.ok)throw new Error("Steam Spy –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω");const e=await s.json();if(!e||Object.keys(e).length===0)return this.searchDemoGames(t);const a=Object.values(e).filter(r=>r.name&&r.name.toLowerCase().includes(t.toLowerCase())).slice(0,12);return a.length===0?this.searchDemoGames(t):a.map(r=>({name:r.name,players:r.average_2weeks?.toLocaleString()||"0",positive:r.positive||0,negative:r.negative||0,score:this.calculateScore(r.positive,r.negative),price:r.price?`${r.price/100}$`:"–ë–µ—Å–ø–ª–∞—Ç–Ω–æ",image:`https://cdn.cloudflare.steamstatic.com/steam/apps/${r.appid}/header.jpg`,appid:r.appid}))}catch(s){return console.error("Steam search error:",s),this.searchDemoGames(t)}}getDemoGames(){return[{name:"Counter-Strike 2",players:"450,000",positive:12e4,negative:8e3,price:"–ë–µ—Å–ø–ª–∞—Ç–Ω–æ",image:"https://cdn.cloudflare.steamstatic.com/steam/apps/730/header.jpg"},{name:"Dota 2",players:"300,000",positive:95e3,negative:5e3,price:"–ë–µ—Å–ø–ª–∞—Ç–Ω–æ",image:"https://cdn.cloudflare.steamstatic.com/steam/apps/570/header.jpg"},{name:"Apex Legends",players:"200,000",positive:88e3,negative:12e3,price:"–ë–µ—Å–ø–ª–∞—Ç–Ω–æ",image:"https://cdn.cloudflare.steamstatic.com/steam/apps/1172470/header.jpg"},{name:"Baldur's Gate 3",players:"150,000",positive:15e4,negative:3e3,price:"$59.99",image:"https://cdn.cloudflare.steamstatic.com/steam/apps/1086940/header.jpg"},{name:"Cyberpunk 2077",players:"80,000",positive:12e4,negative:45e3,price:"$39.99",image:"https://cdn.cloudflare.steamstatic.com/steam/apps/1091500/header.jpg"},{name:"Grand Theft Auto V",players:"120,000",positive:85e4,negative:75e3,price:"$29.99",image:"https://cdn.cloudflare.steamstatic.com/steam/apps/271590/header.jpg"}]}getDemoTopGames(){return this.demoGames.slice(0,8).map(t=>({...t,score:this.calculateScore(t.positive,t.negative)}))}searchDemoGames(t){return this.demoGames.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())).map(e=>({...e,score:this.calculateScore(e.positive,e.negative)}))}calculateScore(t,s){const e=t+s;return e===0?"0%":`${Math.round(t/e*100)}%`}getScoreColor(t){const s=parseInt(t);return s>=90?"#10b981":s>=70?"#f59e0b":"#ef4444"}}const o=new m;document.getElementById("search-btn")?.addEventListener("click",c);document.getElementById("search-input")?.addEventListener("keypress",i=>{i.key==="Enter"&&c()});async function c(){const i=document.getElementById("search-input"),t=document.getElementById("steam-results"),s=i.value.trim();if(!s){t.innerHTML='<div class="error">–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã</div>';return}t.innerHTML='<div class="loading">–ü–æ–∏—Å–∫ –∏–≥—Ä –≤ Steam...</div>';try{const e=await o.searchGames(s);if(e.length===0){t.innerHTML='<div class="error">–ò–≥—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –∑–∞–ø—Ä–æ—Å</div>';return}const a=e.some(r=>r.name.includes("Counter-Strike"))?'<div style="text-align: center; margin-bottom: 1rem; color: #666; font-size: 0.8rem;">–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ (Steam Spy –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)</div>':'<div style="text-align: center; margin-bottom: 1rem; color: #666; font-size: 0.8rem;">–î–∞–Ω–Ω—ã–µ –∏–∑ Steam Spy</div>';n(e,"–ù–∞–π–¥–µ–Ω–æ",a)}catch(e){console.error("Search error:",e);const a=o.searchDemoGames(s);a.length>0?n(a,"–ù–∞–π–¥–µ–Ω–æ –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ",'<div style="text-align: center; margin-bottom: 1rem; color: #666; font-size: 0.8rem;">–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ (Steam Spy –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)</div>'):t.innerHTML='<div class="error">–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –∏–≥—Ä</div>'}}function n(i,t,s=""){const e=document.getElementById("steam-results");e.innerHTML=`
        <div style="text-align: center; margin-bottom: 1rem; color: #4a5568; font-size: 0.9rem;">
            üéÆ ${t} ${i.length} –∏–≥—Ä
        </div>
        ${s}
        <div class="games-container">
            <div class="games-header">
                <div>#</div>
                <div class="header-image">üéÆ</div>
                <div>–ù–∞–∑–≤–∞–Ω–∏–µ</div>
                <div>–ò–≥—Ä–æ–∫–æ–≤ (2 –Ω–µ–¥.)</div>
                <div>–†–µ–π—Ç–∏–Ω–≥</div>
                <div>–¶–µ–Ω–∞</div>
            </div>
            ${i.map((a,r)=>`
                <div class="game-row">
                    <div class="game-number">${r+1}</div>
                    <img src="${a.image}" alt="${a.name}" class="game-image" 
                         onerror="this.src='https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=150&h=70&fit=crop'">
                    <div class="game-name" title="${a.name}">${a.name}</div>
                    <div class="game-players">${a.players}</div>
                    <div class="game-score" style="color: ${o.getScoreColor(a.score)}">
                        ${a.score}
                    </div>
                    <div class="game-price">${a.price}</div>
                </div>
            `).join("")}
        </div>
    `}document.addEventListener("DOMContentLoaded",async()=>{const i=document.getElementById("steam-results");if(i&&i.innerHTML.includes("–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–∏—Å–∫"))try{const t=await o.getTopGames();if(t.length>0){const s=t.some(e=>e.name.includes("Counter-Strike"))?'<div style="text-align: center; margin-bottom: 1rem; color: #666; font-size: 0.8rem;">–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ (Steam Spy –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)</div>':"";n(t,"–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏–≥—Ä—ã –≤ Steam",s)}}catch{}});
